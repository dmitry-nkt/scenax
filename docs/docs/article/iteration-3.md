# üîÅ –ò—Ç–µ—Ä–∞—Ü–∏—è 3: –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤ —Å `@TestCase.each`

–û–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö —á–∞—Å—Ç—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –≤ –∞–≤—Ç–æ—Ç–µ—Å—Ç–∞—Ö ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–¥–Ω–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è —Å —Ä–∞–∑–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.  
Vitest —É–º–µ–µ—Ç `test.each(...)`, –Ω–æ –Ω–∞—à DSL ‚Äî —Ç–æ–∂–µ.

---

## üß© –¶–µ–ª—å

- –î–æ–±–∞–≤–∏—Ç—å `@TestCase.each([...])` ‚Äî –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –º–µ—Ç–æ–¥
- –§–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –≤ –æ—Ç—á—ë—Ç–µ —á–µ—Ä–µ–∑ `allure.parameter`

---

## üì¶ –ö–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç

```ts
@Feature('–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è')
class AuthTests {
  @TestCase.each([
    ['admin@example.com', 'admin123', 200],
    ['user@example.com', 'user123', 200],
    ['hacker@example.com', 'wrongpass', 401],
  ])('–õ–æ–≥–∏–Ω –¥–ª—è %s', async (email, password, expectedStatus) => {
    const res = await axios.post('/login', { email, password })
    expect(res.status).toBe(expectedStatus)
  })
}
```

### ‚úÖ –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

- –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è 3 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–∞ —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏:
  - `–õ–æ–≥–∏–Ω –¥–ª—è admin@example.com`
  - ...
- –ê—Ä–≥—É–º–µ–Ω—Ç—ã `email`, `password`, `expectedStatus` –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –º–µ—Ç–æ–¥
- Allure —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
  - `param1 = admin@example.com`
  - `param2 = admin123`
  - `param3 = 200`

---

## üß† –õ—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤

–ú–µ—Ç–æ–¥ –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç–æ–ª—å–∫–æ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, —Å–∫–æ–ª—å–∫–æ —É–∫–∞–∑–∞–Ω–æ –≤ `.each()`:

```ts
@TestCase.each([
  ['admin', '123', 'desktop', true],
  ['guest', 'qwerty', 'mobile', false]
])('–ü–æ–ø—ã—Ç–∫–∞ –≤—Ö–æ–¥–∞: %s', async (login, pass, platform, expected) => {
  // –≤—Å–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –ø—Ä–∏—Ö–æ–¥—è—Ç –∫–∞–∫ –µ—Å—Ç—å
})
```

> DSL –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ `(...args) => {}`

---

## üìà –í—ã–≥–æ–¥–∞:

- –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ –ª–∞–∫–æ–Ω–∏—á–Ω–æ—Å—Ç—å
- –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ —Ç–µ—Å—Ç–∞ –∏ –¥–∞–Ω–Ω—ã—Ö
- Allure –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ —à–∞–≥–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª—É—á–∞—è
- –†–∞–±–æ—Ç–∞–µ—Ç —Å `step()` –∏ `attach()`

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –Ω–∞—à DSL –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö —á–∞—Å—Ç—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏.  
–í —Å–ª–µ–¥—É—é—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ ‚Äî `@BeforeEachCase`, —Ö—É–∫–∏ –∏ re-use —à–∞–≥–æ–≤.

## üí≠ ¬´–ü–æ—Å—Ç–æ–π—Ç–µ‚Ä¶ –ê —á–µ–º —ç—Ç–æ –ª—É—á—à–µ –æ–±—ã—á–Ω–æ–≥–æ `test.each`?¬ª

–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å.

–í—ã, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, —Å–µ–π—á–∞—Å –¥—É–º–∞–µ—Ç–µ:

> ¬´–û–∫–µ–π, —è –≤–∏–∂—É `@TestCase.each`, –∫—Ä–∞—Å–∏–≤–æ, –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ‚Ä¶  
> –ù–æ –≤–µ–¥—å —É Vitest —É–∂–µ –µ—Å—Ç—å `test.each(...)` ‚Äî —Ä–∞–∑–≤–µ –Ω–µ —Ç–æ –∂–µ —Å–∞–º–æ–µ?¬ª

–†–∞–∑–±–µ—Ä—ë–º –ø–æ –ø–æ–ª–æ—á–∫–∞–º.

---

### ü§ú test.each ‚Äî —ç—Ç–æ —É–¥–æ–±–Ω–æ. –ù–æ‚Ä¶

–ö–æ–≥–¥–∞ –≤—ã –ø–∏—à–µ—Ç–µ —Ç–∞–∫:

```ts
test.each([
  ['email1', 'pass1', 200],
  ['email2', 'pass2', 401],
])('Login for %s', ...)
```

‚Äî –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –±—ã—Å—Ç—Ä—ã–π, –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π —Ç–µ—Å—Ç.

–ù–æ —á—Ç–æ –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ:

- –ü–æ–¥—Å–≤–µ—Ç–∏—Ç—å —Ñ–∏—á—É (`@Feature('–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è')`)
- –ü–æ–≤–µ—Å–∏—Ç—å ID –Ω–∞ —Ç–µ—Å—Ç (`AS_ID`, `TMS`, `Issue`)
- –ü—Ä–æ—Å—Ç–∞–≤–∏—Ç—å severity –∏–ª–∏ owner
- –°–¥–µ–ª–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —à–∞–≥–∏ –≤–Ω—É—Ç—Ä–∏ –æ—Ç—á—ë—Ç–∞
- –ü—Ä–∏–ª–æ–∂–∏—Ç—å response JSON –≤ Allure

–í—Å—ë —ç—Ç–æ –≤–∞–º –ø—Ä–∏–¥—ë—Ç—Å—è –¥–µ–ª–∞—Ç—å –≤—Ä—É—á–Ω—É—é, —Å –∫—É—á–µ–π `allure.label(...)`, `allure.step(...)` –∏ `allure.attachment(...)`.

---

## üéØ –ê –≤–æ—Ç `@TestCase.each` ‚Äî —É–∂–µ –ø—Ä–æ —Å—Ü–µ–Ω–∞—Ä–∏–∏

```ts
@TestCase.each([
  ['admin@example.com', 'admin123', 200],
  ['user@example.com', 'user123', 200],
])('–õ–æ–≥–∏–Ω –¥–ª—è %s', { severity: 'critical' })
async login(email, password, expectedStatus) {
  ...
}
```

–ò –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ:

- ‚úÖ –û–¥–∏–Ω –º–µ—Ç–æ–¥ ‚Üí –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–µ–π—Å–æ–≤
- ‚úÖ –ú–µ—Ç–∫–∏ (`severity`, `feature`) ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ –ù–∞–∑–≤–∞–Ω–∏–µ –∫–µ–π—Å–∞ ‚Äî —à–∞–±–ª–æ–Ω–Ω–æ–µ
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ Allure
- ‚úÖ –í–µ—Å—å –æ—Ç—á—ë—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω: —à–∞–≥–∏, –≤–ª–æ–∂–µ–Ω–∏—è, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

---

### üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ

| –ü–∞—Ä–∞–º–µ—Ç—Ä | `test.each(...)` | `@TestCase.each(...)` |
|---------|------------------|------------------------|
| –ö—Ä–∞—Ç–∫–æ—Å—Ç—å | ‚úÖ | ‚úÖ |
| –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç—á—ë—Ç–∞ | ‚ùå | ‚úÖ |
| –ú–µ—Ç–∫–∏, severity | ‚ùå | ‚úÖ |
| –®–∞–±–ª–æ–Ω –Ω–∞–∑–≤–∞–Ω–∏—è | ‚úÖ | ‚úÖ |
| –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–ª–∞—Å—Å–æ–≤ | ‚ùå | ‚úÖ |
| –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å | ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ | ‚úÖ –£–ø—Ä–∞–≤–ª—è–µ–º–∞—è |
| –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å TestOps | ‚ùå | ‚úÖ |
| üí° –ú–æ–¥–µ–ª—å –º—ã—à–ª–µ–Ω–∏—è | –§—É–Ω–∫—Ü–∏—è | **–¢–µ—Å—Ç-–∫–µ–π—Å** |

---

### üí° –í—ã–≤–æ–¥

–ï—Å–ª–∏ –≤—ã –ø—Ä–æ—Å—Ç–æ —Ö–æ—Ç–∏—Ç–µ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å —Ç–µ—Å—Ç 3 —Ä–∞–∑–∞ ‚Äî `test.each` –≤–∞—Å —Å–ø–∞—Å—ë—Ç.  
–ù–æ –µ—Å–ª–∏ –≤—ã –æ–ø–∏—Å—ã–≤–∞–µ—Ç–µ **–±–∏–∑–Ω–µ—Å-—Å—Ü–µ–Ω–∞—Ä–∏–∏**, —Ö–æ—Ç–∏—Ç–µ **–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—Ç—á—ë—Ç—ã** –∏ **–º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–π DSL**,  
—Ç–æ `@TestCase.each` ‚Äî —ç—Ç–æ —É–∂–µ —è–∑—ã–∫, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ —É–¥–æ–±–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è.  
–ü–æ —Å—É—Ç–∏, –º—ã —Å–æ–∑–¥–∞—ë–º **—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –Ω–∞ –±–∞–∑–µ Vitest**,
–Ω–µ –∫–æ–Ω–∫—É—Ä–∏—Ä—É—è —Å –Ω–∏–º, –∞ –Ω–∞–¥—Å—Ç—Ä–∞–∏–≤–∞—è –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π —Å–ª–æ–π.
