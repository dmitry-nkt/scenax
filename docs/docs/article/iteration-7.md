# üß¨ –ò—Ç–µ—Ä–∞—Ü–∏—è 7: `@BeforeAll`, `@AfterAll`, `@Setup(params)` ‚Äî –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

## üéØ –¶–µ–ª—å

–î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–ª–∞—Å—Å–∞ (`@BeforeAll`, `@AfterAll`)  
–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö (`@Setup(params)`).

---

## üß† –ü—Ä–æ–±–ª–µ–º–∞

–ö–æ–≥–¥–∞ —É –Ω–∞—Å –ø–æ—è–≤–ª—è—é—Ç—Å—è –¥–µ—Å—è—Ç–∫–∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:

- –º–Ω–æ–≥–∏–µ —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–Ω–æ –Ω–µ —Ö–æ—á–µ—Ç—Å—è –ª–æ–≥–∏–Ω–∏—Ç—å—Å—è 10 —Ä–∞–∑)
- –∫–∞–∂–¥—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π (—é–∑–µ—Ä—ã, —Å–µ—Å—Å–∏–∏)
- `@Setup()` –Ω–µ –∑–Ω–∞–µ—Ç, –∫–∞–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `.each()`

---

## ‚úÖ –ß—Ç–æ –¥–æ–±–∞–≤–∏–ª–∏

- `@BeforeAll()` ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **–æ–¥–∏–Ω —Ä–∞–∑ –¥–æ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –∫–ª–∞—Å—Å–∞**
- `@AfterAll()` ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **–æ–¥–∏–Ω —Ä–∞–∑ –ø–æ—Å–ª–µ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –∫–ª–∞—Å—Å–∞**
- `@Setup(params)` ‚Äî —Ç–µ–ø–µ—Ä—å –ø–æ–ª—É—á–∞–µ—Ç **–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ `@TestCase.each([...])`**

---

## üì¶ –ü—Ä–∏–º–µ—Ä

```ts
@Context()
ctx!: { email?: string; status?: number; token?: string; log?: string[] }

@BeforeAll()
initSuite() {
  this.ctx.log = ['üöÄ –ù–∞—á–∏–Ω–∞–µ–º']
}

@AfterAll()
finishSuite() {
  this.ctx.log?.push('üèÅ –ö–æ–Ω–µ—Ü')
  attach('–õ–æ–≥', this.ctx.log?.join('\n') ?? '', 'text/plain')
}

@Setup()
prepare([email, expectedStatus]) {
  this.ctx.email = email
  this.ctx.status = expectedStatus
  this.ctx.token = email + '-token'
  this.ctx.log?.push(`üîß –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞: ${email}`)
}
```

---

## ü§î –ê –æ—Ç–∫—É–¥–∞ `params` –≤ `@Setup()`?

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `@TestCase.each(...)`, –º—ã –ø–µ—Ä–µ–¥–∞—ë–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä—è–º–æ –≤ `@Setup()`:

```ts
@Setup()
prepare([email, status]) { ... } // email –∏ —Å—Ç–∞—Ç—É—Å –ø—Ä–∏—Ö–æ–¥—è—Ç –∏–∑ each()
```

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–±—ã—á–Ω—ã–π `@TestCase(...)` ‚Äî `@Setup()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∏—Ç–µ—Ä–∞—Ü–∏–µ–π 6

| –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª     | –î–ª—è —á–µ–≥–æ                 | –ü–æ–≤–µ–¥–µ–Ω–∏–µ                         |
|--------------------|--------------------------|-----------------------------------|
| `@Setup()`         | –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º  | –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ `beforeEach()`       |
| `@Setup(params)`   | –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ | –†–∞–±–æ—Ç–∞–µ—Ç —Å `.each()`              |
| `@BeforeAll()`     | –û–±—â–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è      | –û–¥–∏–Ω —Ä–∞–∑ –Ω–∞ –≤–µ—Å—å –∫–ª–∞—Å—Å            |
| `@AfterAll()`      | –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ, –æ—á–∏—Å—Ç–∫–∞      | –û–¥–∏–Ω —Ä–∞–∑ –ø–æ—Å–ª–µ –≤—Å–µ—Ö               |

---

## üìå –ß—Ç–æ —ç—Ç–æ –¥–∞—ë—Ç

- –°–æ–∫—Ä–∞—â–∞–µ–º –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ (`login`, `createProject`)
- –ü–æ–≤—ã—à–∞–µ–º —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å (`@Setup([email, status])`)
- –°—Ç—Ä–æ–∏–º –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π e2e lifecycle
- –£–ª—É—á—à–∞–µ–º Allure-—Ä–µ–ø–æ—Ä—Ç—ã —Å `attach(log)`

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥

- `@Step()` –¥–ª—è –º–µ—Ç–æ–¥–æ–≤
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —à–∞–≥–∏ –≤ —Å—Ç–∏–ª–µ Playwright / Serenity
