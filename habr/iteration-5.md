# üß± –ò—Ç–µ—Ä–∞—Ü–∏—è 5: `@Suite`, `@ParentSuite`, `@SubSuite`, `@Layer` ‚Äî –∏–µ—Ä–∞—Ä—Ö–∏—è —Ç–µ—Å—Ç–æ–≤ –≤ Allure

## üéØ –¶–µ–ª—å

–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç—ã –∫–∞–∫ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:  
–ø–æ –º–æ–¥—É–ª—è–º, —Å–ª–æ—è–º, –≥—Ä—É–ø–ø–∞–º –∏ —É—Ä–æ–≤–Ω—è–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏.  
–î–æ–±–∞–≤–∏–º –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã, —á—Ç–æ–±—ã Allure-–æ—Ç—á—ë—Ç —Å—Ç–∞–ª –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–º.

---

## ü§î –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ?

–ö–æ–≥–¥–∞ —Ç–µ—Å—Ç–æ–≤ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –º–Ω–æ–≥–æ, –Ω—É–∂–Ω–æ —É–º–µ—Ç—å:

- –ø–æ–Ω–∏–º–∞—Ç—å, –∫–∞–∫–æ–π –º–æ–¥—É–ª—å –ø–æ–∫—Ä—ã—Ç
- –Ω–∞—Ö–æ–¥–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –≥—Ä—É–ø–ø—ã —Ç–µ—Å—Ç–æ–≤
- –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–æ–ª—å–∫–æ `auth`, –∏–ª–∏ `smoke`, –∏–ª–∏ `e2e`

---

## ‚úÖ –ß—Ç–æ –¥–æ–±–∞–≤–∏–ª–∏

- `@ParentSuite(name)` ‚Äî –≤–µ—Ä—Ö–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å (–Ω–∞–ø—Ä. `E2E –¢–µ—Å—Ç—ã`)
- `@Suite(name)` ‚Äî –º–æ–¥—É–ª—å –∏–ª–∏ —Ä–∞–∑–¥–µ–ª (–Ω–∞–ø—Ä. `Auth API`)
- `@SubSuite(name)` ‚Äî –ø–æ–¥–≥—Ä—É–ø–ø–∞ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ (–Ω–∞–ø—Ä. `–ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏`)
- `@Layer(name)` ‚Äî —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —É—Ä–æ–≤–µ–Ω—å (`api`, `unit`, `e2e`)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —ç—Ç–∏—Ö –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤ –≤ `runTestClass`
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ Allure

---

## üì¶ –ü—Ä–∏–º–µ—Ä

```ts
@ParentSuite('E2E –¢–µ—Å—Ç—ã')
@Suite('Auth API')
@SubSuite('–ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏')
@Layer('api')
@Feature('–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è')
@Tag('regression')
@Tag('auth')
@Owner('team-auth')
class AuthNegativeTests {
  @TestCase.each([
    ['user@example.com', 'wrongpass', 401],
    ['invalid@example.com', '123456', 401],
  ])('–õ–æ–≥–∏–Ω –Ω–µ—É—Å–ø–µ—à–µ–Ω –¥–ª—è %s')
  @Description('–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–∫–∞–∑–∞ –≤ –¥–æ—Å—Ç—É–ø–µ –ø—Ä–∏ –Ω–µ–≤–µ—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö')
  @Tag('login')
  @Severity('critical')
  @Owner('dmitry.nkt')
  async negativeLogin(email: string, password: string, expectedStatus: number) {
    const res = await step(`POST /login —Å ${email}`, () =>
      axios.post('https://httpbin.org/status/' + expectedStatus, { email, password }).catch(e => e.response)
    )
    expect(res.status).toBe(expectedStatus)
  }
}
```

---

## üîç –ö–∞–∫ —ç—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ Allure

```
E2E –¢–µ—Å—Ç—ã
‚îî‚îÄ‚îÄ Auth API
    ‚îî‚îÄ‚îÄ –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
        ‚îî‚îÄ‚îÄ –õ–æ–≥–∏–Ω –Ω–µ—É—Å–ø–µ—à–µ–Ω –¥–ª—è user@example.com ‚úÖ
```

---

## üß† –ß—Ç–æ —ç—Ç–æ –¥–∞—ë—Ç

- üß≠ –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –º–æ–¥—É–ª—è–º
- üìä –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Å–ª–æ—è–º (`unit`, `api`, `e2e`)
- üîç –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≥—Ä—É–ø–ø–∞–º (`@auth`, `@smoke`)
- üíº –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤
- ‚öôÔ∏è –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å auto-labeling –Ω–∞ CI/CD

---

## üéØ –í—ã–≤–æ–¥

–¢–µ–ø–µ—Ä—å –∫–∞–∂–¥—ã–π —Ç–µ—Å—Ç ‚Äî —ç—Ç–æ:

- —á–∞—Å—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ñ–∏—á–∏
- –≤–ª–æ–∂–µ–Ω –≤ –ø–æ–Ω—è—Ç–Ω—É—é –∏–µ—Ä–∞—Ä—Ö–∏—é
- —Å–Ω–∞–±–∂—ë–Ω —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º –∏ —Å–º—ã—Å–ª–æ–≤—ã–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

Allure-–æ—Ç—á—ë—Ç —Å—Ç–∞–ª –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–ø–∏—Å–∫–æ–º –ø—Ä–æ–≤–µ—Ä–æ–∫, –∞ **–∂–∏–≤—ã–º –ø–∞—Å–ø–æ—Ä—Ç–æ–º —Å–∏—Å—Ç–µ–º—ã**.

---

## üöÄ –ß—Ç–æ –¥–∞–ª—å—à–µ?

–í —Å–ª–µ–¥—É—é—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏:

- –¥–æ–±–∞–≤–∏–º `beforeAll`, `afterEach`, –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ö—É–∫–∏
- –Ω–∞—á–Ω—ë–º –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å `@Setup`, `@Teardown`, –≤–æ–∑–º–æ–∂–Ω–æ ‚Äî `@Inject` –∏ `Context`